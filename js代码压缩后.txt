"use strict"; function addLoadEvent(e) { var t = window.onload; "function" != typeof window.onload ? window.onload = e : window.onload = function () { t(), e() } } function insertAfter(e, t) { var n = t.parentNode; n.lastChild == t ? n.appendChild(e) : n.insertBefore(e, t.nextSibling) } function addClass(e, t) { e.className ? (newClassName = e.className, newClassName += " ", newClassName += t, e.className = newClassName) : e.className = t } function highlightPage() { if (!document.getElementById) return !1; if (!document.getElementsByTagName) return !1; var e = document.getElementsByTagName("header"); if (0 == e.length) return !1; var t = e[0].getElementsByTagName("nav"); if (0 == t.length) return !1; for (var n, a = t[0].getElementsByTagName("a"), r = 0; r < a.length; r++)if (n = a[r].getAttribute("href"), -1 != window.location.href.indexOf(n)) { a[r].className = "here"; var i = a[r].lastChild.nodeValue.toLowerCase(); document.body.setAttribute("id", i) } } function moveElement(e, t, n, a) { if (!document.getElementById) return !1; if (!document.getElementById(e)) return !1; var r = document.getElementById(e); r.movement && clearTimeout(r.movement), r.style.left || (r.style.left = "0px"), r.style.top || (r.style.top = "0px"); var i = parseInt(r.style.left), l = parseInt(r.style.top), o = 0; if (i == t && l == n) return !0; i < t && (o = Math.ceil((t - i) / 10), i += o), i > t && (o = Math.ceil((i - t) / 10), i -= o), l < n && (o = Math.ceil((n - l) / 10), l += o), l > n && (o = Math.ceil((l - n) / 10), l -= o), r.style.left = i + "px", r.style.top = l + "px"; var d = "moveElement('" + e + "' , " + t + " , " + n + " , " + a + ")"; r.movement = setTimeout(d, a) } function prepareSlideshow() { if (!document.getElementById) return !1; if (!document.getElementById("intro")) return !1; if (!document.getElementsByTagName) return !1; var e = document.createElement("div"); e.setAttribute("id", "slideshow"); var t = document.createElement("img"); t.setAttribute("id", "preview"), t.setAttribute("src", "images/slideshow.gif"), t.setAttribute("alt", "Jay Skript slideshow"), e.appendChild(t), insertAfter(e, document.getElementById("intro")); var n = document.createElement("img"); n.setAttribute("id", "frame"), n.setAttribute("src", "images/frame.gif"), n.setAttribute("alt", ""), e.appendChild(n); for (var a, r = document.getElementsByTagName("a"), i = 0; i < r.length; i++)r[i].onmouseover = function () { a = this.getAttribute("href"), -1 != a.indexOf("index.html") && moveElement("preview", 0, 0, 5), -1 != a.indexOf("about.html") && moveElement("preview", -150, 0, 5), -1 != a.indexOf("photos.html") && moveElement("preview", -300, 0, 5), -1 != a.indexOf("live.html") && moveElement("preview", -450, 0, 5), -1 != a.indexOf("contact.html") && moveElement("preview", -600, 0, 5) } } function showSection(e) { for (var t = document.getElementsByTagName("section"), n = 0; n < t.length; n++)t[n].getAttribute("id") != e ? t[n].style.display = "none" : t[n].style.display = "block" } function prepareInternalnav() { if (!document.getElementsByTagName) return !1; if (!document.getElementById) return !1; var e = document.getElementsByTagName("article"); if (0 == e.length) return !1; var t = e[0].getElementsByTagName("nav"); if (0 == t.length) return !1; for (var n = t[0], a = n.getElementsByTagName("a"), r = 0; r < a.length; r++) { var i = a[r].getAttribute("href").split("#")[1]; document.getElementById(i) && (document.getElementById(i).style.display = "none", a[r].destination = i, a[r].onclick = function () { return console.log(this), showSection(this.destination), !1 }) } } function preparePlaceholder() { if (!document.createElement) return !1; if (!document.createTextNode) return !1; if (!document.getElementById) return !1; if (!document.getElementById("imagegallery")) return !1; var e = document.createElement("div"); e.setAttribute("class", "swap"); var t = document.createElement("img"); t.setAttribute("id", "placeholder"), t.setAttribute("src", "images/placeholder.gif"), t.setAttribute("alt", "my image gallery"), t.setAttribute("title", "my image gallery"); var n = document.createElement("p"); n.setAttribute("id", "description"); var a = document.createTextNode("Í¼Æ¬ËµÃ÷"); n.appendChild(a), insertAfter(e, document.getElementById("imagegallery")), e.appendChild(t), insertAfter(n, t) } function showPic(e) { var t = e.getAttribute("href"); if (document.getElementById("placeholder").setAttribute("src", t), e.getAttribute("title")) var n = e.getAttribute("title"); else var n = ""; var a = document.getElementById("description"); return 3 == a.firstChild.nodeType && (a.firstChild.nodeValue = n), !1 } function prepareGallery() { if (!document.getElementById("imagegallery")) return !1; for (var e = document.getElementById("imagegallery"), t = e.getElementsByTagName("a"), n = 0; n < t.length; n++)t[n].onclick = function () { return showPic(this) } } function stripeTables() { if (!document.getElementsByTagName) return !1; for (var e = document.getElementsByTagName("table"), t = 0; t < e.length; t++)for (var n = !1, a = e[t].getElementsByTagName("tr"), r = 0; r < a.length; r++)1 == n ? (addClass(a[r], "odd"), n = !1) : n = !0 } function highlightRows() { if (!document.getElementsByTagName) return !1; for (var e = document.getElementsByTagName("tr"), t = 0; t < e.length; t++)e[t].oldClassName = e[t].className, e[t].onmouseover = function () { addClass(this, "highlight") }, e[t].onmouseout = function () { this.className = this.oldClassName } } function displayAbbreviations() { if (!document.getElementsByTagName || !document.createElement || !document.createTextNode) return !1; var e = document.getElementsByTagName("abbr"); if (e.length < 1) return !1; for (var t = new Array, n = 0; n < e.length; n++) { var a = e[n]; if (!(a.childNodes.length < 1)) { var r = a.getAttribute("title"), i = a.lastChild.nodeValue; t[i] = r } } var l = document.createElement("dl"); for (i in t) { var r = t[i], o = document.createElement("dt"), d = document.createTextNode(i); o.appendChild(d); var s = document.createElement("dd"), m = document.createTextNode(r); s.appendChild(m), l.appendChild(o), l.appendChild(s) } if (l.childNodes.length < 1) return !1; var u = document.createElement("h3"), c = document.createTextNode("Abbreviations"); u.appendChild(c); var g = document.getElementsByTagName("article"); if (0 == g.length) return !1; var f = g[0]; f.appendChild(u), f.appendChild(l) } function focusLabels() { if (document.getElementsByTagName) return !1; for (var e = document.getElementsByTagName("label"), t = 0; t < e.length; t++)label[t].getAttribute("for") && (e[t].onclick = function () { var e = this.getAttribute("for"); if (!document.getElementById) return !1; document.getElementById(e).focus() }) } function resetFields(e) { for (var t = 0; t < e.elements.length; t++) { var n = e.elements[t]; if ("submit" != n.type) { (n.placeholder || n.getAttribute("placeholder")) && (n.onfocus = function () { var e = this.placeholder || this.getAttribute("placeholder"); this.value == e && (this.className = "", this.value = "") }, n.onblur = function () { "" == this.value && (this.className = "placeholder", this.value = this.placeholder || this.getAttribute("placeholder")) }, n.onblur()) } } } function prepareForms() { for (var e = 0; e < document.forms.length; e++) { var t = document.forms[e]; resetFields(t), t.onsubmit = function () { return !!validateForm(this) && !submitFormWithAjax(this, document.getElementsByTagName("article")[0]) } } } function isFilled(e) { if (0 == e.value.replace(" ", "").length) return !1; var t = e.placeholder || e.getAttribute("placeholder"); return e.value != t } function isEmail(e) { return -1 != e.value.indexOf("@") && -1 != e.value.indexOf(".") } function validateForm(e) { for (var t = 0; t < e.elements.length; t++) { var n = e.elements[t]; if ("required" == n.required && !isFilled(n)) return alert("Please fill in the " + n.name + " field."), !1; if ("email" == n.type && !isEmail(n)) return alert("The " + n.name + " field must be a valid email address."), !1 } return !0 } function getHTTPObject() { return "undefined" == typeof XMLHttpRequest && (XMLHttpRequest = function () { try { return new ActiveXObject("Msxml2.XMLHTTP.6.0") } catch (e) { } try { return new ActiveXObject("Msxml2.XMLHTTP.3.0") } catch (e) { } try { return new ActiveXObject("Msxml2.XMLHTTP") } catch (e) { } return !1 }), new XMLHttpRequest } function displayAjaxLoading(e) { for (; e.hasChildNodes();)e.removeChild(e.lastChild); var t = document.createElement("img"); t.setAttribute("src", "images/loading.gif"), t.setAttribute("alt", "Loading"), e.appendChild(t) } function submitFormWithAjax(e, t) { var n = getHTTPObject(); if (!n) return !1; displayAjaxLoading(t); for (var a, r = [], i = 0; i < e.elements.length; i++)a = e.elements[i], r[i] = a.name + "=" + encodeURIComponent(a.value); var l = r.join("&"); return n.open("POST", e.getAttribute("action"), !0), n.setRequestHeader("Content-type", "application/x-www-form-urlencoded"), n.onreadystatechange = function () { if (4 == n.readyState) if (200 == n.status || 0 == n.status) { var e = n.responseText.match(/<article>([\s\S]+)<\/article>/); e.length > 0 ? t.innerHTML = e[1] : t.innerHTML = "<p>0ops, there was an error. Sorry.</p>" } else t.innerHTML = "<p>" + n.statusText + "</p>" }, n.send(l), !0 } addLoadEvent(highlightPage), addLoadEvent(prepareSlideshow), addLoadEvent(prepareInternalnav), addLoadEvent(prepareGallery), addLoadEvent(preparePlaceholder), addLoadEvent(stripeTables), addLoadEvent(highlightRows), addLoadEvent(displayAbbreviations), -1 != window.location.href.indexOf("contact.html") && (addLoadEvent(focusLabels), addLoadEvent(prepareForms));